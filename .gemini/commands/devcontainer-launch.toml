description = "指定ディレクトリから.devcontainerを検索しDevcontainerを起動"

prompt = """

# Devcontainer Launch Command

## 概要

指定されたディレクトリ内で `.devcontainer` フォルダを検索し、devcontainer CLIを使ってコンテナを起動します。

---

## 実行フロー

### Phase 1: ディレクトリの確認

1. ユーザーから対象ディレクトリのパスを取得（未指定の場合はカレントディレクトリ）

2. ディレクトリの存在確認

```bash
ls -la <target-directory>
```

### Phase 2: .devcontainerの検索

1. 対象ディレクトリ配下で `.devcontainer` フォルダを検索

```bash
find <target-directory> -type d -name ".devcontainer" 2>/dev/null
```

2. 検索結果を表示
   - 見つからない場合 → エラーメッセージを表示して終了
   - 複数見つかった場合 → 一覧を表示してユーザーに選択させる
   - 1つの場合 → そのまま使用

### Phase 3: devcontainer CLIの確認

1. devcontainer CLIがインストールされているか確認

```bash
which devcontainer
```

2. インストールされていない場合、インストール方法を案内

```bash
# npm経由でインストール
npm install -g @devcontainers/cli
```

### Phase 4: Devcontainerの起動

1. 起動前の確認（devcontainer.jsonの内容を表示）

```bash
cat <path-to-.devcontainer>/devcontainer.json
```

2. ユーザーに起動確認を行う

3. devcontainerを起動

```bash
# ワークスペースフォルダを指定して起動
devcontainer up --workspace-folder <project-root>
```

4. 起動オプションの提案（必要に応じて）

```bash
# バックグラウンドで起動
devcontainer up --workspace-folder <project-root> --remove-existing-container

# 既存コンテナを削除して再起動
devcontainer up --workspace-folder <project-root> --remove-existing-container
```

### Phase 5: 起動後の操作

1. 起動成功時、以下のオプションを提案

```bash
# コンテナ内でシェルを開く
devcontainer exec --workspace-folder <project-root> bash

# VS Codeで開く（VS Code拡張が必要）
code --folder-uri vscode-remote://dev-container+<container-id>/<workspace-path>
```

---

## 注意事項

- **devcontainer CLI** がインストールされている必要がある
- **Docker** が起動している必要がある
- 複数の `.devcontainer` が見つかった場合は選択させる
- 起動前に `devcontainer.json` の内容を確認する

---

## トラブルシューティング

### Dockerが起動していない場合

```bash
# Docker状態確認
docker info

# Docker起動（Linux/WSL）
sudo systemctl start docker
```

### コンテナが既に存在する場合

```bash
# 既存コンテナを削除して再起動
devcontainer up --workspace-folder <project-root> --remove-existing-container
```

### ビルドエラーが発生した場合

```bash
# キャッシュなしでリビルド
devcontainer build --workspace-folder <project-root> --no-cache
```
"""
