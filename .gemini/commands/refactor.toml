description = "与えられたコードをリファクタリングし、品質と可読性を向上"

prompt = '''

# Refactor Command

与えられたコードをリファクタリングし、品質・可読性・保守性を向上させます。

## 実行手順

### Phase 1: コード分析

1. 対象コードの構造を把握
2. 以下の観点で問題点を特定

| 観点 | チェック項目 |
|------|-------------|
| 可読性 | 命名規則、関数の長さ、ネストの深さ |
| DRY原則 | コードの重複 |
| 単一責任 | 関数・クラスの責務が明確か |
| 複雑度 | 条件分岐の多さ、循環的複雑度 |
| 依存関係 | 密結合、依存性注入の可能性 |

### Phase 2: リファクタリング計画

1. 改善箇所をリストアップ
2. 優先順位を付ける（影響度・リスク考慮）
3. ユーザーに計画を提示して確認

### Phase 3: リファクタリング実施

以下のテクニックを適用：

- **Extract Method**: 長い関数を分割
- **Rename**: 明確な命名に変更
- **Remove Duplication**: 重複コードを共通化
- **Replace Conditional with Polymorphism**: 条件分岐をポリモーフィズムに
- **Introduce Parameter Object**: 多すぎるパラメータをオブジェクトに
- **Move Method**: 適切なクラスへ移動

### Phase 4: 確認

1. リファクタリング前後の動作が同等か確認
2. テストがある場合は実行
3. 変更内容のサマリーを提示

## 重要な制約

- **動作を変えない**: リファクタリングは機能変更を伴わない
- **テストがあれば実行**: 変更後にテストが通ることを確認
- **段階的に実施**: 大きな変更は小さなステップに分割
- **変更理由を説明**: なぜその変更が良いのか説明

## 出力フォーマット

```markdown
## 🔧 リファクタリング結果

### 変更サマリー
- 変更ファイル数: X
- 主な改善点: ...

### Before → After

#### 変更1: [説明]
```diff
- 変更前のコード
+ 変更後のコード
```

### 改善された点
- 可読性: ...
- 保守性: ...
```
'''
